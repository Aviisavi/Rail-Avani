
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Know India Through Every Station</title>
</head>
<body>
  <h1>ЁЯУН Know India Through Every Station</h1>
  <p id="output">Detecting location...</p>
  <button onclick="speakFact()">ЁЯФК Speak</button>
  <select id="language" onchange="updateLanguage()">
    <option value="en">English</option>
    <option value="hi">рд╣рд┐рдиреНрджреА</option>
  </select>

  <script>
    const factsDatabase = {
      "gwalior": {
        en: "Gwalior is known for its magnificent fort and as the birthplace of the great musician Tansen.",
        hi: "рдЧреНрд╡рд╛рд▓рд┐рдпрд░ рдЕрдкрдиреЗ рднрд╡реНрдп рдХрд┐рд▓реЗ рдФрд░ рдорд╣рд╛рди рд╕рдВрдЧреАрддрдХрд╛рд░ рддрд╛рдирд╕реЗрди рдХреА рдЬрдиреНрдорд╕реНрдерд▓реА рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╕рд┐рджреНрдз рд╣реИред"
      },
      "jhansi": {
        en: "Jhansi is known for Rani Lakshmi Bai and its key role in the 1857 rebellion.",
        hi: "рдЭрд╛рдБрд╕реА рд░рд╛рдиреА рд▓рдХреНрд╖реНрдореАрдмрд╛рдИ рдФрд░ 1857 рдХреА рдХреНрд░рд╛рдВрддрд┐ рдореЗрдВ рдЕрдкрдиреА рднреВрдорд┐рдХрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рд╣реИред"
      },
      "cuttack": {
        en: "Cuttack is one of the oldest cities in Odisha, famous for silver filigree work and Durga Puja.",
        hi: "рдХрдЯрдХ рдЙрдбрд╝реАрд╕рд╛ рдХрд╛ рдПрдХ рдкреНрд░рд╛рдЪреАрди рд╢рд╣рд░ рд╣реИ, рдЬреЛ рдЪрд╛рдВрджреА рдХреА рдХрд╛рд░реАрдЧрд░реА рдФрд░ рджреБрд░реНрдЧрд╛ рдкреВрдЬрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рд╣реИред"
      },
      "bharthia": {
        en: "Bharthia is a culturally rich town with deep-rooted traditions and heritage.",
        hi: "рднрд╛рд░рдерд┐рдпрд╛ рдПрдХ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рд░реВрдк рд╕реЗ рд╕рдореГрджреНрдз рдирдЧрд░ рд╣реИ, рдЬрд┐рд╕рдХреА рдкрд░рдВрдкрд░рд╛рдПрдВ рдФрд░ рд╡рд┐рд░рд╛рд╕рдд рдЧрд╣рд░реА рд╣реИрдВред"
      },
      "tonk": {
        en: "Tonk is known for its Nawabi heritage and beautiful Islamic architecture.",
        hi: "рдЯреЛрдВрдХ рдЕрдкрдиреА рдирд╡рд╛рдмреА рд╡рд┐рд░рд╛рд╕рдд рдФрд░ рд╕реБрдВрджрд░ рдЗрд╕реНрд▓рд╛рдореА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред"
      },
      "rajkot": {
        en: "Rajkot is an important city in Gujarat, known for its association with Mahatma Gandhi.",
        hi: "рд░рд╛рдЬрдХреЛрдЯ рдЧреБрдЬрд░рд╛рдд рдХрд╛ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╢рд╣рд░ рд╣реИ, рдЬреЛ рдорд╣рд╛рддреНрдорд╛ рдЧрд╛рдВрдзреА рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рд╣реИред"
      },
      "tangi": {
        en: "Tangi is a town in Odisha known for its serene lakeside views and rural charm.",
        hi: "рдЯрд╛рдВрдЧреА рдУрдбрд┐рд╢рд╛ рдХрд╛ рдПрдХ рд╢рд╛рдВрдд рдХрд╕реНрдмрд╛ рд╣реИ, рдЬреЛ рдЕрдкрдиреА рдЭреАрд▓реЛрдВ рдФрд░ рдЧреНрд░рд╛рдореАрдг рд╕реБрдВрджрд░рддрд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред"
      },
      "datia": {
        en: "Datia is known for its majestic seven-storey palace and deep spiritual significance with many temples.",
        hi: "рджрддрд┐рдпрд╛ рдЕрдкрдиреЗ рднрд╡реНрдп рд╕рд╛рдд рдордВрдЬрд┐рд▓рд╛ рдорд╣рд▓ рдФрд░ рдЕрдиреЗрдХ рдордВрджрд┐рд░реЛрдВ рдХреЗ рдХрд╛рд░рдг рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдорд╣рддреНрд╡ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕рд┐рджреНрдз рд╣реИред"
      }
    };

    let selectedLang = "en";
    let currentFact = "";

    function updateLanguage() {
      selectedLang = document.getElementById("language").value;
      detectLocation(); // re-run location on language change
    }

    function speakFact() {
      if (currentFact !== "") {
        const utterance = new SpeechSynthesisUtterance(currentFact);
        utterance.lang = selectedLang === "hi" ? "hi-IN" : "en-US";
        window.speechSynthesis.speak(utterance);
      }
    }

    function fetchFact(place, lang) {
      const placeKey = place.toLowerCase();
      for (const key in factsDatabase) {
        if (placeKey.includes(key) || key.includes(placeKey)) {
          return factsDatabase[key][lang];
        }
      }
      return lang === "hi" ? "рдЗрд╕ рд╕реНрдерд╛рди рдХреЗ рд▓рд┐рдП рдЬрд╛рдирдХрд╛рд░реА рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред" : "No facts available for this location.";
    }

    function detectLocation() {
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(async position => {
          const { latitude, longitude } = position.coords;
          const apiKey = "53360715f60741e5a19d9b3f4080918b";

          const response = await fetch(`https://api.geoapify.com/v1/geocode/reverse?lat=${latitude}&lon=${longitude}&apiKey=${apiKey}`);
          const data = await response.json();

          const place = data.features[0].properties.city ||
                        data.features[0].properties.county ||
                        data.features[0].properties.state_district ||
                        data.features[0].properties.state ||
                        data.features[0].properties.suburb;

          console.log("Detected Place:", place);

          currentFact = fetchFact(place, selectedLang);
          document.getElementById("output").textContent = currentFact;
          speakFact();

        }, error => {
          document.getElementById("output").textContent = "Location permission denied.";
        });
      } else {
        document.getElementById("output").textContent = "Geolocation not supported.";
      }
    }

    detectLocation();
  </script>
</body>
</html>
